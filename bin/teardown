#!/bin/bash

cartridge_type="python-2.7"
source "/etc/openshift/node.conf"
source "${CARTRIDGE_BASE_PATH}/${cartridge_type}/info/lib/util"

# Import Environment Variables
for f in ~/.env/*; do
    source $f
done

source "${OPENSHIFT_HOMEDIR}/${cartridge_type}/lib/utils"

#  Stop the processes.
$(basename "$0")/control stop

#  Delete the virtualenv.
delete_virtualenv

#  Remove the cartridge environment variables.
remove_cartridge_env_var "PYTHON_EGG_CACHE"
remove_cartridge_env_var "LD_LIRARY_PATH"

#  Remove the cartridge + pod directory.
pod_cart_name=$(get_pod_cartridge_name)
rm -rf "${OPENSHIFT_HOMEDIR}/${pod_cart_name}/$cartridge_type"
rm -rf "${OPENSHIFT_HOMEDIR}/${cartridge_type}"

